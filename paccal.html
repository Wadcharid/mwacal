<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>คำนวณการใช้ PAC และการรับ PAC</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh; /* ความสูงของหน้าจอ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 10px; /* ลดช่องว่างระหว่างกลุ่มข้อมูล */
            height: 95%; /* กำหนดความสูงให้พอดีกับหน้าจอ */
            max-height: 720px; /* ความสูงสูงสุด 720px */
            overflow-y: auto; /* หากยาวเกินหน้าจอให้มีการ scroll */
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            width: 100%;
            max-width: 500px;
        }

        .input-group {
            display: flex;
            flex-direction: column; /* จัดเรียงข้อมูลเป็นแนวตั้ง */
            gap: 5px; /* ลดช่องว่างระหว่างป้ายชื่อและฟิลด์ป้อนข้อมูล */
        }

        label {
            margin-bottom: 2px; /* ลดช่องว่างใต้ป้ายชื่อ */
        }

        input {
            padding: 2px; /* ลด padding ของ input เพื่อให้ระยะห่างลดลง */
            max-width: 100%;
        }

        button {
            align-self: flex-start;
            padding: 10px 15px;
        }

        .result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <form id="pacForm">
        <div class="input-group">
            <label for="date">วันที่:</label>
            <input type="date" id="date" required>
        </div>

        <h3>Stock PAC ล่าสุด (m<sup>3</sup>)</h3>
        <div class="input-group">
            <label for="tankA">Tank A:</label>
            <input type="number" id="tankA" required>
            <label for="tankB">Tank B:</label>
            <input type="number" id="tankB" required>
            <label for="tankC">Tank C:</label>
            <input type="number" id="tankC" required>
            <label for="tankD">Tank D:</label>
            <input type="number" id="tankD" required>
        </div>

        <h3>RW (m<sup>3</sup>/s)</h3>
        <div class="input-group">
            <label for="rw1">RW1:</label>
            <input type="number" id="rw1" required>
            <label for="rw2">RW2:</label>
            <input type="number" id="rw2" required>
            <label for="rw3">RW3:</label>
            <input type="number" id="rw3" required>
            <label for="rw4">RW4:</label>
            <input type="number" id="rw4" required>
        </div>

        <h3>PAC Dose (mg/L)</h3>
        <div class="input-group">
            <label for="pacdose1">เฟส 1:</label>
            <input type="number" id="pacdose1" required>
            <label for="pacdose2">เฟส 2:</label>
            <input type="number" id="pacdose2" required>
            <label for="pacdose3">เฟส 3:</label>
            <input type="number" id="pacdose3" required>
            <label for="pacdose4">เฟส 4:</label>
            <input type="number" id="pacdose4" required>
        </div>

        <button type="button" onclick="calculatePAC()">คำนวณการใช้ PAC และการรับ PAC</button>
    </form>

    <div class="result" id="result"></div>

    <script>
        function calculatePAC() {
            // Get input values
            const tankA = parseFloat(document.getElementById('tankA').value);
            const tankB = parseFloat(document.getElementById('tankB').value);
            const tankC = parseFloat(document.getElementById('tankC').value);
            const tankD = parseFloat(document.getElementById('tankD').value);

            const rw1 = parseFloat(document.getElementById('rw1').value);
            const rw2 = parseFloat(document.getElementById('rw2').value);
            const rw3 = parseFloat(document.getElementById('rw3').value);
            const rw4 = parseFloat(document.getElementById('rw4').value);

            const pacdose1 = parseFloat(document.getElementById('pacdose1').value);
            const pacdose2 = parseFloat(document.getElementById('pacdose2').value);
            const pacdose3 = parseFloat(document.getElementById('pacdose3').value);
            const pacdose4 = parseFloat(document.getElementById('pacdose4').value);

            // Calculate PAC Use for each phase
            const pacuse1 = (pacdose1 * rw1 * 3600 * 24) / 1000 / 1000 / 0.35;
            const pacuse2 = (pacdose2 * rw2 * 3600 * 24) / 1000 / 1000 / 0.35;
            const pacuse3 = (pacdose3 * rw3 * 3600 * 24) / 1000 / 1000 / 0.35;
            const pacuse4 = (pacdose4 * rw4 * 3600 * 24) / 1000 / 1000 / 0.35;

            // Convert Tank A, B, C, D from m3 to tons
            const tankA_ton = tankA * 1.19;
            const tankB_ton = tankB * 1.19;
            const tankC_ton = tankC * 1.19;
            const tankD_ton = tankD * 1.19;

            // Calculate Tank A+B and Tank C+D in tons
            const tankab = tankA_ton + tankB_ton;
            const tankcd = tankC_ton + tankD_ton;

            // Calculate PAC Income (modified calculation)
            const pacincome_ab = pacuse1 + pacuse2;
            const pacincome_cd = pacuse3 + pacuse4;

            // Calculate number of PAC delivery trips
            const pac_car1 = Math.floor((120 - tankab - tankcd) * 0.8 / 15);
            const pac_car2 = Math.floor((pacincome_ab + pacincome_cd) / 15);

            // Display results
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                PAC Use เฟส 1: ${pacuse1.toFixed(2)} ตัน/วัน<br>
                PAC Use เฟส 2: ${pacuse2.toFixed(2)} ตัน/วัน<br>
                PAC Use เฟส 3: ${pacuse3.toFixed(2)} ตัน/วัน<br>
                PAC Use เฟส 4: ${pacuse4.toFixed(2)} ตัน/วัน<br><br>
                การรับ PAC ลง Tank A+B: ${pacincome_ab.toFixed(2)} ตัน<br>
                การรับ PAC ลง Tank C+D: ${pacincome_cd.toFixed(2)} ตัน<br><br>
                เที่ยวแรก ก่อนเที่ยง (pac_car1): ${pac_car1} เที่ยว<br>
                จำนวนเที่ยวที่ต้องมาส่ง PAC (pac_car2): ${pac_car2} เที่ยว<br>
            `;
        }
    </script>
</body>

</html>
